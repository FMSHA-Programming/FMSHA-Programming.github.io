---
layout: page
title: Конспекты уроков
date: 2021-10-12
---

## Представление чисел в компьютере

Двоичная система счисления особенно важна в программировании, т.к. вся информация в компьютере хранится в виде последовательности битов. Каждый бит может быть равен нулю либо единице. 

### Дополнительный код

Представление беззнаковых целых чисел в памяти не вызывает вопросов. Для представления знаковых целых чисел чаще всего используется *дополнительный код* (two's complement).

| Десятичное представление | Прямой |  Обратный |  Дополнительный  |
| --- | --- | --- | --- |
| 127     |  0111 1111 | 0111 1111 |  0111 1111
| 1       |  0000 0001 | 0000 0001 |  0000 0001
| 0       |  0000 0000 | 0000 0000 |  0000 0000
| -0      |  1000 0000 | 1111 1111 |  0000 0000
| -1      |  1000 0001 | 1111 1110 |  1111 1111
| -2      |  1000 0010 | 1111 1101 |  1111 1110
| -3      |  1000 0011 | 1111 1100 |  1111 1101
| -4      |  1000 0100 | 1111 1011 |  1111 1100
| -5      |  1000 0101 | 1111 1010 |  1111 1011
| -6      |  1000 0110 | 1111 1001 |  1111 1010
| -7      |  1000 0111 | 1111 1000 |  1111 1001
| -8      |  1000 1000 | 1111 0111 |  1111 1000
| -9      |  1000 1001 | 1111 0110 |  1111 0111
| -10     |  1000 1010 | 1111 0101 |  1111 0110
| -11     |  1000 1011 | 1111 0100 |  1111 0101
| -127    |  1111 1111 | 1000 0000 |  1000 0001
| -128    |  ---       |  ---      |  1000 0000

### Стандарт IEEE-754

Число одинарной точности с плавающей запятой. [Описание в Wikipedia](https://ru.wikipedia.org/wiki/%D0%A7%D0%B8%D1%81%D0%BB%D0%BE_%D0%BE%D0%B4%D0%B8%D0%BD%D0%B0%D1%80%D0%BD%D0%BE%D0%B9_%D1%82%D0%BE%D1%87%D0%BD%D0%BE%D1%81%D1%82%D0%B8).

```c
float a = -1.045e-12;  // - 1.045 x 10^{-12}
```

В `32` битовом числе один бит хранит знак, `8` битов хранят показатель экспоненты (порядок), оставшиеся биты хранят *мантиссу* - значение числа без учета порядка.

## Битовые операции в Си

### Побитовое И: `&`

Бинарый оператор:

|       | 0 | 1 |
|  ---  |---|---|
| **0** | 0 | 0 |
| **1** | 0 | 1 |

```c
int a = 5;      // 101 
int b = 3;      // 011
int c = a & b;  // 001
```

### Побитовое ИЛИ: `|`

Бинарый оператор:

|       | 0 | 1 |
|  ---  |---|---|
| **0** | 0 | 1 |
| **1** | 1 | 1 |

```c
int a = 5;      // 101 
int b = 3;      // 011
int c = a | b;  // 111
```

### Побитовое исключающее ИЛИ: `^`

Бинарый оператор:

|       | 0 | 1 |
|  ---  |---|---|
| **0** | 0 | 1 |
| **1** | 1 | 0 |

```c
int a = 5;      // 101 
int b = 3;      // 011
int c = a ^ b;  // 110
```

### Побитовое НЕ: `~`

Унарный оператор:

| 0 | 1 |
|---|---|
| 1 | 0 |

```c
int a = 5;   // 101 
int c = ~b;  // 010
```

### Битовые сдвиги

Унарные операторы `<<` и `>>`:

```c
int a = 20;      // 0010100 
int b = a << 2;  // 1010000
int b = a >> 2;  // 0000101
```

Сдвиг влево на `1` эквивалентен умножению на `2`, сдвиг вправо - делению на `2`.

**Пример**. Существует красивый метод подсчета коилчества единиц в двоичной записи числа:

```c
size_t bitcount(unsigned int n) {
    size_t count = 0;
    while (n) {
        ++count;
        n = n & (n - 1);
    }
    return count;
}
```

Проверьте, что эта программа верна. Подумайте почему она работает.

**Упражнение**. Напишите функцию, принимающую переменную `unsigned int` и определяющую является ли это число степенью двойки.

**Упражнение**. Напишите функцию, принимающую переменную `unsigned int` и определяющую равен ли единице `i`-й бит его двоичного представления. Индекс `i` также является аргументом функции.

**Упражнение**. Напишите функцию для циклической перестановки битов числа (две функции: для левой и для правой перестановок).
